/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {var l=this;function v(a,c){var b=a.split("."),d=l;b[0]in d||!d.execScript||d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)b.length||void 0===c?d[e]?d=d[e]:d=d[e]={}:d[e]=c};function A(a,c){c=c||{};this.c=a;this.b=c.index||0;this.length=c.length||a.length-this.b;this.offset=this.b;this.f=void 0!==c.padding?c.padding:!0;this.g=void 0!==c.bigEndian?c.bigEndian:!1}function ka(a,c,b){this.type=a;this.a=c;this.offset=b}
function D(a){var c=a.length+a.offset;for(a.a=[];a.b<c;){var b=a,d=b.c,e=b.b;b.a.push(new ka(String.fromCharCode(d[e++],d[e++],d[e++],d[e++]),d=b.g?(d[e++]<<24|d[e++]<<16|d[e++]<<8|d[e++])>>>0:(d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24)>>>0,e));e+=d;b.f&&1===(e-b.offset&1)&&e++;b.b=e}}function N(a,c){var b=a.a[c];return void 0===b?null:b};function la(a){var c;c=c||{};this.a=a;this.j=c.parserOption}function ma(a,c){for(var b=a.a,d=c.offset,e=c.offset+c.a,h,f,m=[];d<e;){d+=2;h=b[d++]|b[d++]<<8;f=na[h];if(void 0===f)m.push({type:f,value:{code:h,G:b[d]|b[d+1]<<8<<16>>16,I:b[d++],H:b[d++]}});else switch(f){case "keyRange":case "velRange":case "keynum":case "velocity":m.push({type:f,value:{I:b[d++],H:b[d++]}});break;default:m.push({type:f,value:{G:b[d++]|b[d++]<<8<<16>>16}})}d+=2;d+=2}return m}
function Ea(a,c){for(var b=a.a,d=c.offset,e=c.offset+c.a,h,f,m=[];d<e;)if(h=b[d++]|b[d++]<<8,f=na[h],void 0===f)m.push({type:f,value:{code:h,G:b[d]|b[d+1]<<8<<16>>16,I:b[d++],H:b[d++]}});else switch(f){case "keynum":case "keyRange":case "velRange":case "velocity":m.push({type:f,value:{I:b[d++],H:b[d++]}});break;default:m.push({type:f,value:{G:b[d++]|b[d++]<<8<<16>>16}})}return m}
function Fa(a,c,b){var d=[],e={oa:[],keyRange:{H:127,I:0}},h;for(h=a;h<c;++h)a=b[h],d.push(a),"unknown"===a.type?e.oa.push(a.value):e[a.type]=a.value;return{M:e,N:d}}
var na=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey"];function Ga(a,c,b){this.c=a;this.u=c;this.o=b;this.h=b.key;this.J=b.velocity;this.s=b.sample;this.i=b.basePlaybackRate;this.sampleRate=b.sampleRate;this.w=b.volume;this.m=b.panpot;this.B=b.pitchBend;this.C=b.pitchBendSensitivity;this.F=b.modEnvToPitch;this.g=b.expression;this.v=a.currentTime;this.f=this.i;this.l=!1}function Ha(a){return 440*Math.pow(2,(a-6900)/1200)}
function Ia(a){var c=a.o,b=a.j,d=a.b,e=a.c.currentTime,h=c.releaseTime-64,h=e+c.volRelease*d.gain.value*(1+h/(0>h?64:63)),f=a.A,m=Ha(c.initialFilterFc),n=Ha(c.initialFilterFc+c.modEnvToFilterFc),n=e+c.modRelease*(m===n?1:(f.frequency.value-m)/(n-m));if(a.D)switch(c.sampleModes){case 1:d.gain.cancelScheduledValues(0);d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(0,h);f.frequency.cancelScheduledValues(0);f.frequency.setValueAtTime(f.frequency.value,e);f.frequency.linearRampToValueAtTime(m,
n);b.playbackRate.cancelScheduledValues(0);b.playbackRate.setValueAtTime(b.playbackRate.value,e);b.playbackRate.linearRampToValueAtTime(a.f,n);b.stop(h);break;case 2:l.console.log("detect unused sampleModes");break;case 3:b.loop=!1}}Ga.prototype.connect=function(){this.b.connect(this.u)};
function Ja(a,c){a.f=a.i*Math.pow(Math.pow(2,1/12),c/(0>c?8192:8191)*a.C*a.o.scaleTuning);var b=a.j.playbackRate,d=a.f,e=a.v,h=a.o,f=e+h.modAttack,m=f+h.modDecay,n=d*Math.pow(Math.pow(2,1/12),a.F*a.o.scaleTuning);b.cancelScheduledValues(0);b.setValueAtTime(d,e);b.linearRampToValueAtTime(n,f);b.linearRampToValueAtTime(d+(n-d)*(1-h.modSustain),m)};function $a(a,c){var b,d;this.D=a;this.K=0;if(void 0!==l.AudioContext)b=new l.AudioContext;else if(void 0!==l.webkitAudioContext)b=new l.webkitAudioContext;else if(void 0!==l.mozAudioContext)b=new l.mozAudioContext;else throw Error("Web Audio not supported");void 0===b.createGainNode&&(b.createGainNode=b.createGain);this.c=b;this.g=this.c.createGain();this.F=this.c.createBufferSource();this.l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.T=[127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127];
this.P=[64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];this.R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.A=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2];this.s=[127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127];this.S=[64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];this.u=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];this.m=[0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0];this.j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.b=this.B=!1;this.document=c;this.J=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];this.f=
[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];this.aa=1/65535;this.h=Array(128);b=0;for(d=this.h.length;b<d;++b)this.h[b]=127;this.C=!0;this.w=this.c.createConvolver();this.v=this.c.createGain()}
var ab="Acoustic Piano;Bright Acoustic Piano;Electric Grand Piano;Honky-tonk Piano;Electric Piano;Electric Piano 2;Harpsichord;Clavi;Celesta;Glockenspiel;Musical box;Vibraphone;Marimba;Xylophone;Tubular Bell;Dulcimer;Drawbar Organ;Percussive Organ;Rock Organ;Church organ;Reed organ;Accordion;Harmonica;Tango Accordion;Acoustic Guitar (nylon);Acoustic Guitar (steel);Electric Guitar (jazz);Electric Guitar (clean);Electric Guitar (muted);Overdriven Guitar;Distortion Guitar;Guitar Harmonics;Acoustic Bass;Electric Bass (finger);Electric Bass (pick);Fretless Bass;Slap Bass 1;Slap Bass 2;Synth Bass 1;Synth Bass 2;Violin;Viola;Cello;Double bass;Tremolo Strings;Pizzicato Strings;Orchestral Harp;Timpani;String Ensemble 1;String Ensemble 2;Synth Strings 1;Synth Strings 2;Voice Aahs;Voice Oohs;Synth Voice;Orchestra Hit;Trumpet;Trombone;Tuba;Muted Trumpet;French horn;Brass Section;Synth Brass 1;Synth Brass 2;Soprano Sax;Alto Sax;Tenor Sax;Baritone Sax;Oboe;English Horn;Bassoon;Clarinet;Piccolo;Flute;Recorder;Pan Flute;Blown Bottle;Shakuhachi;Whistle;Ocarina;Lead 1 (square);Lead 2 (sawtooth);Lead 3 (calliope);Lead 4 (chiff);Lead 5 (charang);Lead 6 (voice);Lead 7 (fifths);Lead 8 (bass + lead);Pad 1 (new age);Pad 2 (warm);Pad 3 (polysynth);Pad 4 (choir);Pad 5 (bowed);Pad 6 (metallic);Pad 7 (halo);Pad 8 (sweep);FX 1 (rain);FX 2 (soundtrack);FX 3 (crystal);FX 4 (atmosphere);FX 5 (brightness);FX 6 (goblins);FX 7 (echoes);FX 8 (sci-fi);Sitar;Banjo;Shamisen;Koto;Kalimba;Bagpipe;Fiddle;Shanai;Tinkle Bell;Agogo;Steel Drums;Woodblock;Taiko Drum;Melodic Tom;Synth Drum;Reverse Cymbal;Guitar Fret Noise;Breath Noise;Seashore;Bird Tweet;Telephone Ring;Helicopter;Applause;Gunshot".split(";"),bb=
"Standard Set;;;;;;;;Room Set;;;;;;;;Power Set;;;;;;;;Electronic Set;Analog Set;;;;;;;Jazz Set;;;;;;;;Brush Set;;;;;;;;Orchestra Set;;;;;;;;SFX Set;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;".split(";");function cb(a){var c;a.V=new la(a.D);a.i=db(a);a.b=!1;a.B=!1;for(c=0;16>c;++c)eb(a,c,0),fb(a,c,100),gb(a,c,64),hb(a,c,0,64),ib(a,c,2),a.u[c]=!1,a.s[c]=127,a.b&&(a.m[c]=9===c?128:0),a.b&&(a.j[c]=0);for(c=0;128>c;++c)a.h[c]=127}
function db(a){var c,b,d,e,h,f,m,n,g=a.V,u=new A(g.a,g.j),y;D(u);if(1!==u.a.length)throw Error("wrong chunk length");y=N(u,0);if(null===y)throw Error("chunk not found");var w,x=g.a,B=y.offset,J;if("RIFF"!==y.type)throw Error("invalid chunk type:"+y.type);J=String.fromCharCode(x[B++],x[B++],x[B++],x[B++]);if("sfbk"!==J)throw Error("invalid signature:"+J);w=new A(x,{index:B,length:y.a-4});D(w);if(3!==w.a.length)throw Error("invalid sfbk structure");var O=N(w,0),C=g.a,U=O.offset,Ka;if("LIST"!==O.type)throw Error("invalid chunk type:"+
O.type);Ka=String.fromCharCode(C[U++],C[U++],C[U++],C[U++]);if("INFO"!==Ka)throw Error("invalid signature:"+Ka);D(new A(C,{index:U,length:O.a-4}));var oa=N(w,1),pa,V=g.a,W=oa.offset,La;if("LIST"!==oa.type)throw Error("invalid chunk type:"+oa.type);La=String.fromCharCode(V[W++],V[W++],V[W++],V[W++]);if("sdta"!==La)throw Error("invalid signature:"+La);pa=new A(V,{index:W,length:oa.a-4});D(pa);if(1!==pa.a.length)throw Error("TODO");g.h=N(pa,0);var qa=N(w,2),z,X=g.a,Y=qa.offset,Ma;if("LIST"!==qa.type)throw Error("invalid chunk type:"+
qa.type);Ma=String.fromCharCode(X[Y++],X[Y++],X[Y++],X[Y++]);if("pdta"!==Ma)throw Error("invalid signature:"+Ma);z=new A(X,{index:Y,length:qa.a-4});D(z);if(9!==z.a.length)throw Error("invalid pdta chunk");var Z=N(z,0),t=g.a,r=Z.offset,hc=g.l=[],ic=Z.offset+Z.a;if("phdr"!==Z.type)throw Error("invalid chunk type:"+Z.type);for(;r<ic;)hc.push({ka:String.fromCharCode.apply(null,t.subarray(r,r+=20)),ja:t[r++]|t[r++]<<8,K:t[r++]|t[r++]<<8,Z:t[r++]|t[r++]<<8,qa:(t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)>>>
0,pa:(t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)>>>0,ra:(t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)>>>0});var aa=N(z,1),ra=g.a,ba=aa.offset,jc=g.m=[],kc=aa.offset+aa.a;if("pbag"!==aa.type)throw Error("invalid chunk type:"+aa.type);for(;ba<kc;)jc.push({$:ra[ba++]|ra[ba++]<<8,O:ra[ba++]|ra[ba++]<<8});var Na=N(z,2);if("pmod"!==Na.type)throw Error("invalid chunk type:"+Na.type);g.g=ma(g,Na);var Oa=N(z,3);if("pgen"!==Oa.type)throw Error("invalid chunk type:"+Oa.type);g.f=Ea(g,Oa);var ca=N(z,4),Pa=g.a,da=ca.offset,
lc=g.o=[],mc=ca.offset+ca.a;if("inst"!==ca.type)throw Error("invalid chunk type:"+ca.type);for(;da<mc;)lc.push({ea:String.fromCharCode.apply(null,Pa.subarray(da,da+=20)),X:Pa[da++]|Pa[da++]<<8});var ea=N(z,5),sa=g.a,fa=ea.offset,nc=g.i=[],oc=ea.offset+ea.a;if("ibag"!==ea.type)throw Error("invalid chunk type:"+ea.type);for(;fa<oc;)nc.push({Y:sa[fa++]|sa[fa++]<<8,da:sa[fa++]|sa[fa++]<<8});var Qa=N(z,6);if("imod"!==Qa.type)throw Error("invalid chunk type:"+Qa.type);g.c=ma(g,Qa);var Ra=N(z,7);if("igen"!==
Ra.type)throw Error("invalid chunk type:"+Ra.type);g.b=Ea(g,Ra);var ga=N(z,8),kb,ta,q=g.a,p=ga.offset,pc=g.la=[],qc=g.ma=[],rc=ga.offset+ga.a,lb,ua,mb,va,wa,ha,nb,ob,pb,qb;if("shdr"!==ga.type)throw Error("invalid chunk type:"+ga.type);for(;p<rc;){lb=String.fromCharCode.apply(null,q.subarray(p,p+=20));ua=(q[p++]<<0|q[p++]<<8|q[p++]<<16|q[p++]<<24)>>>0;mb=(q[p++]<<0|q[p++]<<8|q[p++]<<16|q[p++]<<24)>>>0;va=(q[p++]<<0|q[p++]<<8|q[p++]<<16|q[p++]<<24)>>>0;wa=(q[p++]<<0|q[p++]<<8|q[p++]<<16|q[p++]<<24)>>>
0;ha=(q[p++]<<0|q[p++]<<8|q[p++]<<16|q[p++]<<24)>>>0;nb=q[p++];ob=q[p++]<<24>>24;pb=q[p++]|q[p++]<<8;qb=q[p++]|q[p++]<<8;var Sa=new Int16Array((new Uint8Array(q.subarray(g.h.offset+2*ua,g.h.offset+2*mb))).buffer);va-=ua;wa-=ua;if(0<ha){for(var P=Sa,rb=ha,xa=void 0,ia=void 0,sb=void 0,Ta=void 0,tb=1;22050>rb;){xa=new Int16Array(2*P.length);ia=Ta=0;for(sb=P.length;ia<sb;++ia)xa[Ta++]=P[ia],xa[Ta++]=P[ia];P=xa;tb*=2;rb*=2}kb=P;ta=tb;Sa=kb;ha*=ta;va*=ta;wa*=ta}pc.push(Sa);qc.push({ta:lb,na:va,ba:wa,sampleRate:ha,
ha:nb,ia:ob,sa:pb,ua:qb})}g.a=null;var Q=g.l,K=g.m,Ua=[],ub,vb,Va,wb,H,xb,F,yb;H=0;for(xb=Q.length;H<xb;++H){ub=Q[H].Z;vb=Q[H+1]?Q[H+1].Z:K.length;Va=[];F=ub;for(yb=vb;F<yb;++F){var zb=Fa(K[F].$,K[F+1]?K[F+1].$:g.f.length,g.f);m=zb.M;n=zb.N;var Ab=Fa(K[F].O,K[F+1]?K[F+1].O:g.g.length,g.g);h=Ab.M;f=Ab.N;Va.push({W:m,ca:n,fa:h,ga:f});wb=void 0!==m.instrument?m.instrument.G:void 0!==h.instrument?h.instrument.G:null}Ua.push({name:Q[H].ka,info:Va,L:Q[H],o:wb})}var ja=g.o,L=g.i,Bb=[],Cb,Db,Wa,M,Eb,G,Fb;
M=0;for(Eb=ja.length;M<Eb;++M){Cb=ja[M].X;Db=ja[M+1]?ja[M+1].X:L.length;Wa=[];G=Cb;for(Fb=Db;G<Fb;++G){var Gb=Fa(L[G].Y,L[G+1]?L[G+1].Y:g.b.length,g.b);d=Gb.M;e=Gb.N;var Hb=Fa(L[G].O,L[G+1]?L[G+1].da:g.c.length,g.c);c=Hb.M;b=Hb.N;Wa.push({W:d,ca:e,fa:c,ga:b})}Bb.push({name:ja[M].ea,info:Wa})}var ya=[],za,I,Aa,Ba,Ca,Ib,Da,Jb;Ca=0;for(Ib=Ua.length;Ca<Ib;++Ca)if(I=Ua[Ca],Ba=I.L.ja,"number"===typeof I.o&&(Aa=Bb[I.o],"EOI"!==Aa.name.replace(/\0*$/,"")))for(void 0===ya[I.L.K]&&(ya[I.L.K]=[]),za=ya[I.L.K],
za[Ba]=[],za[Ba].name=I.name,Da=0,Jb=Aa.info.length;Da<Jb;++Da){var Kb=g,Lb=za[Ba],k=Aa.info[Da].W,Xa=void 0,R=void 0,Mb=void 0,Nb=void 0,Ob=void 0,Pb=void 0,Qb=void 0,Rb=void 0,Sb=void 0,Tb=void 0,Ub=void 0,Vb=void 0,Wb=void 0,Xb=void 0,Yb=void 0,Ya=void 0,Za=void 0,E=void 0,Zb=void 0;if(void 0!==k.keyRange&&void 0!==k.sampleID)for(Mb=S(k,"delayVolEnv",-12E3),Nb=S(k,"attackVolEnv",-12E3),Ob=S(k,"holdVolEnv",-12E3),Pb=S(k,"decayVolEnv",-12E3),Qb=S(k,"sustainVolEnv"),Rb=S(k,"releaseVolEnv",-12E3),
Sb=S(k,"delayModEnv",-12E3),Tb=S(k,"attackModEnv",-12E3),Ub=S(k,"holdModEnv",-12E3),Vb=S(k,"decayModEnv",-12E3),Wb=S(k,"sustainModEnv"),Xb=S(k,"releaseModEnv",-12E3),Yb=S(k,"coarseTune")+S(k,"fineTune")/100,Ya=S(k,"scaleTuning",100)/100,Za=S(k,"freqVibLFO"),E=k.keyRange.I,Zb=k.keyRange.H;E<=Zb;++E)Lb[E]||(Xa=S(k,"sampleID"),R=Kb.ma[Xa],Lb[E]={sample:Kb.la[Xa],sampleRate:R.sampleRate,sampleModes:S(k,"sampleModes"),basePlaybackRate:Math.pow(Math.pow(2,1/12),(E-S(k,"overridingRootKey",R.ha)+Yb+R.ia/
100)*Ya),modEnvToPitch:S(k,"modEnvToPitch")/100,scaleTuning:Ya,start:32768*S(k,"startAddrsCoarseOffset")+S(k,"startAddrsOffset"),end:32768*S(k,"endAddrsCoarseOffset")+S(k,"endAddrsOffset"),loopStart:R.na+32768*S(k,"startloopAddrsCoarseOffset")+S(k,"startloopAddrsOffset"),loopEnd:R.ba+32768*S(k,"endloopAddrsCoarseOffset")+S(k,"endloopAddrsOffset"),volDelay:Math.pow(2,Mb/1200),volAttack:Math.pow(2,Nb/1200),volHold:Math.pow(2,Ob/1200)*Math.pow(2,(60-E)*S(k,"keynumToVolEnvHold")/1200),volDecay:Math.pow(2,
Pb/1200)*Math.pow(2,(60-E)*S(k,"keynumToVolEnvDecay")/1200),volSustain:Qb/1E3,volRelease:Math.pow(2,Rb/1200),modDelay:Math.pow(2,Sb/1200),modAttack:Math.pow(2,Tb/1200),modHold:Math.pow(2,Ub/1200)*Math.pow(2,(60-E)*S(k,"keynumToModEnvHold")/1200),modDecay:Math.pow(2,Vb/1200)*Math.pow(2,(60-E)*S(k,"keynumToModEnvDecay")/1200),modSustain:Wb/1E3,modRelease:Math.pow(2,Xb/1200),initialFilterFc:S(k,"initialFilterFc",13500),modEnvToFilterFc:S(k,"modEnvToFilterFc"),initialFilterQ:S(k,"initialFilterQ"),reverbEffectSend:S(k,
"reverbEffectSend"),initialAttenuation:S(k,"initialAttenuation"),freqVibLFO:Za?8.176*Math.pow(2,Za/1200):void 0})}return ya}function S(a,c,b){void 0===b&&(b=0);return a[c]?a[c].G:b}$a.prototype.connect=function(){this.F.connect(this.g);this.g.connect(this.c.destination);this.C&&jb(this)};function jb(a){a.g.connect(a.w);a.w.connect(a.v);a.v.connect(a.c.destination)}function $b(a,c){a.g.gain.value=c/16384*a.aa}var ac="Instrument;Vol;Pan;Bend;Range;GM Mode".split(";");
function bc(a){var c=a.a=a.document.createElement("table"),b=a.document.createElement("thead"),d=a.document.createElement("tbody"),e,h,f,m,n,g;b.appendChild(cc(a,ac,!0));for(g=0;16>g;++g){e=cc(a,ac.length+128,!1);d.appendChild(e);h=e.querySelector("td:nth-child(1)");f=a.document.createElement("input");f.setAttribute("type","checkbox");f.addEventListener("change",function(a,c){return function(){var b=this.checked,d=a.f[c],e;if(a.J[c]=b)for(b=0,e=d.length;b<e;++b)d[b].b.disconnect(0);else for(b=0,e=
d.length;b<e;++b)d[b].connect()}}(a,g),!1);h.appendChild(f);m=a.document.createElement("select");for(f=0;128>f;++f){var u=9!==g?ab[f]:bb[f];n=a.document.createElement("option");""!==u&&(n.textContent=u,n.value=f,m.appendChild(n))}h.appendChild(m);m.addEventListener("change",function(a,b){return function(c){eb(a,b,c.target.value)}}(a,g),!1);m.selectedIndex=a.l[g];e=e.querySelectorAll("td:nth-last-child(-n+128)");for(f=0;128>f;++f)e[f].addEventListener("mousedown",function(a,b,c){return function(d){d.preventDefault();
a.U=!0;dc(a,b,c,127)}}(a,g,f)),e[f].addEventListener("mouseover",function(a,b,c){return function(d){d.preventDefault();a.U&&dc(a,b,c,127)}}(a,g,f)),e[f].addEventListener("mouseout",function(a,b,c){return function(d){d.preventDefault();ec(a,b,c)}}(a,g,f)),e[f].addEventListener("mouseup",function(a,b,c){return function(d){d.preventDefault();a.U=!1;ec(a,b,c)}}(a,g,f))}c.appendChild(b);c.appendChild(d);return c}
function cc(a,c,b){var d=a.document.createElement("tr"),e,h=c instanceof Array,f,m=h?c.length:c;for(f=0;f<m;++f)e=a.document.createElement(b?"th":"td"),e.textContent=h&&void 0!==c[f]?c[f]:"",b&&m===f+1&&e.setAttribute("colspan",129),d.appendChild(e);return d}
function dc(a,c,b,d){var e=a.m[c],h=128;a.b&&(h=127,64===e?e=125:0!==a.j[c]&&0!==e&&126!==e&&127!==e&&(e=a.j[c]));a.a&&(a.b?a.a.querySelector("thead > tr:first-child > th:nth-child(6)").innerText="XG Mode":a.B?a.a.querySelector("thead > tr:first-child > th:nth-child(6)").innerText="GS Mode":(a.a.querySelector("thead > tr:first-child > th:nth-child(6)").innerText="GM Mode",e=0));9===c&&(e=h);var f=void 0!==a.i[e]?a.i[e]:a.i[9===c?h:0],h=f[a.l[c]];if(a.a){var m=a.a.querySelector("tbody > tr:nth-child("+
(c+1)+") > td:nth-child("+(ac.length+b)+")");m.classList.add("note-on");m.style.opacity=d/127}void 0===h&&(h=f[0]);if(f=h[b]||f[0]){e=a.P[c]-64;f.channel=c;f.key=b;f.velocity=d;f.panpot=e/(0>e?64:63);f.volume=a.T[c]/127;f.pitchBend=a.R[c]-8192;f.expression=a.s[c];f.pitchBendSensitivity=a.A[c];f.mute=a.J[c];f.releaseTime=a.S[c];9===c&&(h.volume*=a.h[b]/127);b=new Ga(a.c,a.g,f);var n=b.c;d=b.o;var g=b.s,u,y,w,e=b.c.currentTime,x=e+d.volDelay,h=e+d.modDelay,B=x+d.volAttack+d.volHold,f=x+d.modAttack+
d.modHold,J=B+d.volDecay,m=f+d.modDecay;y=d.loopStart/b.sampleRate;w=d.loopEnd/b.sampleRate;var O=d.start/b.sampleRate,C,g=g.subarray(0,g.length+d.end);u=b.D=n.createBuffer(1,g.length,b.sampleRate);u.getChannelData(0).set(g);g=b.j=n.createBufferSource();g.buffer=u;g.loop=1===(d.sampleModes&1);g.loopStart=y;g.loopEnd=w;Ja(b,b.B);u=n.createPanner();y=b.b=n.createGain();w=y.gain;b.a=n.createGain();b.a.gain.value=b.g/127;n=b.A=n.createBiquadFilter();n.type="lowpass";u.panningModel="equalpower";u.setPosition(Math.sin(b.m*
Math.PI/2),0,Math.cos(b.m*Math.PI/2));C=b.J/127*b.w*(1-d.initialAttenuation/1E3);0>C&&(C=0);w.setValueAtTime(0,e);w.setValueAtTime(0,x);w.setValueAtTime(C,B);w.linearRampToValueAtTime(C*(1-d.volSustain),J);n.Q.setValueAtTime(Math.pow(10,d.initialFilterQ/200),e);x=Ha(d.initialFilterFc);B=Ha(d.initialFilterFc+d.modEnvToFilterFc);J=x+(B-x)*(1-d.modSustain);n.frequency.setValueAtTime(x,e);n.frequency.setValueAtTime(x,h);n.frequency.setValueAtTime(B,f);n.frequency.linearRampToValueAtTime(J,m);g.connect(n);
n.connect(u);u.connect(b.a);b.a.connect(y);d.mute||b.connect();g.start(0,O);a.f[c].push(b)}else l.console.warn("instrument not found: bank=%s instrument=%s channel=%s key=%s",e,a.l[c],c,b)}function ec(a,c,b){var d=a.f[c],e,h=a.u[c];a.a&&(a=a.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child("+(b+ac.length)+")"),a.classList.remove("note-on"),a.style.opacity=1);a=0;for(c=d.length;a<c;++a)e=d[a],e.h===b&&(e.l=!0,h||(Ia(e),d.splice(a,1),--a,--c))}
function fc(a,c,b){var d=a.f[c];if(!(a.u[c]=!(64>b)))for(c=0,b=d.length;c<b;++c)a=d[c],a.l&&(Ia(a),d.splice(c,1),--c,--b)}function eb(a,c,b){a.a&&(a.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:first-child > select").value=b);a.l[c]=b}function fb(a,c,b){a.a&&(a.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(2)").textContent=b);a.T[c]=b}function gc(a,c,b){var d,e,h=a.f[c];d=0;for(e=h.length;d<e;++d){var f=h[d];f.a.gain.value=(f.g=b)/127}a.s[c]=b}
function gb(a,c,b){a.a&&(a.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(3)").textContent=b);a.P[c]=b}function hb(a,c,b,d){b=b&127|(d&127)<<7;var e,h=a.f[c],f=b-8192;a.a&&(a.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(4)").textContent=f);d=0;for(e=h.length;d<e;++d)Ja(h[d],f);a.R[c]=b}function ib(a,c,b){a.a&&(a.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(5)").textContent=b);a.A[c]=b};function T(a){this.l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.v=this.B.bind(this);this.b=!0;this.a=window;this.w=a||{};this.m=void 0!==this.w.m;this.a.addEventListener("DOMContentLoaded",function(){this.A=!0}.bind(this),!1)}
T.prototype.F=function(a){this.A?sc(this,a):this.a.addEventListener("DOMContentLoaded",function b(){this.a.removeEventListener("DOMContentLoaded",b,!1);sc(this,a)}.bind(this),!1)};function sc(a,c){var b;a.i();b=a.f=new XMLHttpRequest;b.open("GET",c,!0);b.responseType="arraybuffer";b.addEventListener("load",function(a){var b=new Uint8Array(a.target.response);this.u(b);"function"===typeof this.s&&this.s(a.target.response);this.f=null}.bind(a),!1);b.send()}
T.prototype.C=function(a){var c=this.c;c.C!==a&&(c.w.disconnect(0),c.v.disconnect(0),(c.C=a)&&jb(c))};T.prototype.i=function(){this.f&&(this.f.abort(),this.f=null)};
T.prototype.u=function(a){var c;this.i();this.c?(c=this.c,c.D=a,c.V=new la(a),c.i=db(c)):(c=this.c=new $a(a,this.a.document),this.m||this.a.document.body.appendChild(bc(c)),cb(c),a=c,a.connect(),a.F.start(0),$b(a,16383),this.a.addEventListener("message",this.v,!1));this.a.opener?this.a.opener.postMessage("link,ready","*"):this.a.parent!==this.a&&this.a.parent.postMessage("link,ready","*")};
T.prototype.B=function(a){a="function"===typeof a.data.split?a.data.split(","):"";switch(""!==a?a.shift():""){case "midi":tc(this,a.map(function(a){return parseInt(a,16)}));break;case "link":switch(a=a.shift(),a){case "reqpatch":this.a.opener?this.a.opener.postMessage("link,patch","*"):this.a.parent!==this.a&&this.a.parent.postMessage("link,patch","*");break;case "setpatch":break;default:l.console.error("unknown link message:",a)}}};T.prototype.D=function(a){this.s=a};
function tc(a,c){var b=c[0]&15,d=a.c;switch(c[0]&240){case 128:ec(d,b,c[1]);break;case 144:0<c[2]?dc(d,b,c[1],c[2]):ec(d,b,c[1]);break;case 176:switch(c[1]){case 0:d.b&&(d.m[b]=c[2]);break;case 6:if(a.b)switch(a.h[b]){case 0:switch(a.g[b]){case 0:ib(d,b,c[2])}}else switch(a.l[b]){case 26:d.h[a.j[b]]=c[2]}break;case 38:if(a.b)switch(a.h[b]){case 0:switch(a.g[b]){case 0:ib(d,b,d.A[b]+c[2]/100)}}break;case 7:fb(d,b,c[2]);break;case 10:gb(d,b,c[2]);break;case 120:for(var e=d.f[b],h;0<e.length;)h=e.shift(),
ec(d,b,h.h),Ia(h),h.b.disconnect(0);break;case 121:gc(d,b,127);hb(d,b,0,64);fc(d,b,0);break;case 32:d.b&&(d.j[b]=c[2]);break;case 98:a.b=!1;a.j[b]=c[2];break;case 99:a.b=!1;a.l[b]=c[2];break;case 100:a.b=!0;a.g[b]=c[2];break;case 101:a.b=!0;a.h[b]=c[2];break;case 64:fc(d,b,c[2]);break;case 11:gc(d,b,c[2]);break;case 74:d.S[b]=c[2]}break;case 192:eb(d,b,c[1]);break;case 224:hb(d,b,c[1],c[2]);break;case 240:switch(c[1]){case 126:127===c[2]&&9===c[3]&&1===c[4]&&cb(d);break;case 127:switch(c[3]){case 4:switch(c[4]){case 1:$b(d,
c[5]+(c[6]<<7))}}}switch(c[2]){case 67:switch(c[7]){case 4:$b(d,c[8]<<7);break;case 126:cb(d),d.b=!0}break;case 65:switch(c[8]){case 4:$b(d,c[9]<<7);break;case 127:cb(d),d.B=!0}}}};v("SoundFont.WebMidiLink",T);v("SoundFont.WebMidiLink.prototype.setup",T.prototype.F);v("SoundFont.WebMidiLink.prototype.loadSoundFont",T.prototype.u);v("SoundFont.WebMidiLink.prototype.cancelLoading",T.prototype.i);v("SoundFont.WebMidiLink.prototype.setLoadCallback",T.prototype.D);v("SoundFont.WebMidiLink.prototype.setReverb",T.prototype.C);}).call(this); //# sourceMappingURL=sf2synth.min.js.map

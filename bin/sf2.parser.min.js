/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {var k=this;function l(g,e){var b=g.split("."),a=k;b[0]in a||!a.execScript||a.execScript("var "+b[0]);for(var c;b.length&&(c=b.shift());)b.length||void 0===e?a[c]?a=a[c]:a=a[c]={}:a[c]=e};function m(g,e){e=e||{};this.f=g;this.b=e.index||0;this.length=e.length||g.length-this.b;this.offset=this.b;this.g=void 0!==e.padding?e.padding:!0;this.j=void 0!==e.bigEndian?e.bigEndian:!1}function v(g,e,b){this.type=g;this.a=e;this.offset=b}
function y(g){var e=g.length+g.offset;for(g.a=[];g.b<e;){var b=g,a=b.f,c=b.b;b.a.push(new v(String.fromCharCode(a[c++],a[c++],a[c++],a[c++]),a=b.j?(a[c++]<<24|a[c++]<<16|a[c++]<<8|a[c++])>>>0:(a[c++]|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0,c));c+=a;b.g&&1===(c-b.offset&1)&&c++;b.b=c}}function z(g,e){var b=g.a[e];return void 0===b?null:b};function A(g,e){e=e||{};this.a=g;this.g=e.parserOption;this.sampleRate=e.sampleRate||22050}
A.prototype.f=function(){var g,e,b=new m(this.a,this.g);y(b);if(1!==b.a.length)throw Error("wrong chunk length");b=z(b,0);if(null===b)throw Error("chunk not found");var a=this.a,c=b.offset,d;if("RIFF"!==b.type)throw Error("invalid chunk type:"+b.type);d=String.fromCharCode(a[c++],a[c++],a[c++],a[c++]);if("sfbk"!==d)throw Error("invalid signature:"+d);b=new m(a,{index:c,length:b.a-4});y(b);if(3!==b.a.length)throw Error("invalid sfbk structure");a=z(b,0);c=this.a;d=a.offset;var f;if("LIST"!==a.type)throw Error("invalid chunk type:"+
a.type);f=String.fromCharCode(c[d++],c[d++],c[d++],c[d++]);if("INFO"!==f)throw Error("invalid signature:"+f);y(new m(c,{index:d,length:a.a-4}));a=z(b,1);c=this.a;d=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);f=String.fromCharCode(c[d++],c[d++],c[d++],c[d++]);if("sdta"!==f)throw Error("invalid signature:"+f);a=new m(c,{index:d,length:a.a-4});y(a);if(1!==a.a.length)throw Error("TODO");this.b=z(a,0);b=z(b,2);a=this.a;c=b.offset;if("LIST"!==b.type)throw Error("invalid chunk type:"+
b.type);d=String.fromCharCode(a[c++],a[c++],a[c++],a[c++]);if("pdta"!==d)throw Error("invalid signature:"+d);b=new m(a,{index:c,length:b.a-4});y(b);if(9!==b.a.length)throw Error("invalid pdta chunk");a=z(b,0);c=this.a;d=a.offset;f=[];var h=a.offset+a.a;if("phdr"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<h;)f.push({J:String.fromCharCode.apply(null,c.subarray(d,d+=20)),F:c[d++]|c[d++]<<8,l:c[d++]|c[d++]<<8,G:c[d++]|c[d++]<<8,A:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0,o:(c[d++]|c[d++]<<
8|c[d++]<<16|c[d++]<<24)>>>0,B:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0});a=z(b,1);c=this.a;d=a.offset;f=[];h=a.offset+a.a;if("pbag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<h;)f.push({H:c[d++]|c[d++]<<8,I:c[d++]|c[d++]<<8});a=z(b,2);if("pmod"!==a.type)throw Error("invalid chunk type:"+a.type);H(this,a);a=z(b,3);if("pgen"!==a.type)throw Error("invalid chunk type:"+a.type);I(this,a);a=z(b,4);c=this.a;d=a.offset;f=[];h=a.offset+a.a;if("inst"!==a.type)throw Error("invalid chunk type:"+
a.type);for(;d<h;)f.push({w:String.fromCharCode.apply(null,c.subarray(d,d+=20)),s:c[d++]|c[d++]<<8});a=z(b,5);c=this.a;d=a.offset;f=[];h=a.offset+a.a;if("ibag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<h;)f.push({u:c[d++]|c[d++]<<8,v:c[d++]|c[d++]<<8});a=z(b,6);if("imod"!==a.type)throw Error("invalid chunk type:"+a.type);H(this,a);a=z(b,7);if("igen"!==a.type)throw Error("invalid chunk type:"+a.type);I(this,a);h=z(b,8);b=this.a;a=h.offset;c=[];d=[];f=h.offset+h.a;var n,w,r,t,p,B,C,
D,E;if("shdr"!==h.type)throw Error("invalid chunk type:"+h.type);for(;a<f;){h=String.fromCharCode.apply(null,b.subarray(a,a+=20));n=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;w=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;r=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;t=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;p=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;B=b[a++];C=b[a++]<<24>>24;D=b[a++]|b[a++]<<8;E=b[a++]|b[a++]<<8;g=new Int16Array((new Uint8Array(b.subarray(this.b.offset+
2*n,this.b.offset+2*w))).buffer);r-=n;t-=n;if(0<p){var F=p,u,q,G,x;for(e=1;F<this.sampleRate;){u=new Int16Array(2*g.length);q=x=0;for(G=g.length;q<G;++q)u[x++]=g[q],u[x++]=g[q];g=u;e*=2;F*=2}p*=e;r*=e;t*=e}c.push(g);d.push({L:h,start:n,end:w,N:r,m:t,sampleRate:p,C:B,D:C,K:D,M:E})}this.a=null};
function H(g,e){for(var b=g.a,a=e.offset,c=e.offset+e.a,d,f,h=[];a<c;){a+=2;d=b[a++]|b[a++]<<8;f=J[d];if(void 0===f)h.push({type:f,value:{code:d,c:b[a]|b[a+1]<<8<<16>>16,i:b[a++],h:b[a++]}});else switch(f){case "keyRange":case "velRange":case "keynum":case "velocity":h.push({type:f,value:{i:b[a++],h:b[a++]}});break;default:h.push({type:f,value:{c:b[a++]|b[a++]<<8<<16>>16}})}a+=2;a+=2}}
function I(g,e){for(var b=g.a,a=e.offset,c=e.offset+e.a,d,f,h=[];a<c;)if(d=b[a++]|b[a++]<<8,f=J[d],void 0===f)h.push({type:f,value:{code:d,c:b[a]|b[a+1]<<8<<16>>16,i:b[a++],h:b[a++]}});else switch(f){case "keynum":case "keyRange":case "velRange":case "velocity":h.push({type:f,value:{i:b[a++],h:b[a++]}});break;default:h.push({type:f,value:{c:b[a++]|b[a++]<<8<<16>>16}})}}
var J=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey","endOper"];l("SoundFont.Parser",A);l("SoundFont.Parser.prototype.parse",A.prototype.f);}).call(this); //# sourceMappingURL=sf2.parser.min.js.map

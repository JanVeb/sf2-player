/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] 2013-2017 - Logue [ https://github.com/logue/sf2synth.js ] The MIT License */(function() {'use strict';var k=this;function m(e,f){e=e.split(".");var b=k;e[0]in b||!b.execScript||b.execScript("var "+e[0]);for(var a;e.length&&(a=e.shift());)e.length||void 0===f?b[a]&&b[a]!==Object.prototype[a]?b=b[a]:b=b[a]={}:b[a]=f};function n(e,f){f=f||{};this.f=e;this.b=f.index||0;this.length=f.length||e.length-this.b;this.offset=this.b;this.g=void 0!==f.padding?f.padding:!0;this.j=void 0!==f.bigEndian?f.bigEndian:!1}function w(e,f,b){this.type=e;this.a=f;this.offset=b}
function y(e){var f=e.length+e.offset;for(e.a=[];e.b<f;){var b,a=e;b=a.f;var c=a.b;a.a.push(new w(String.fromCharCode(b[c++],b[c++],b[c++],b[c++]),b=a.j?(b[c++]<<24|b[c++]<<16|b[c++]<<8|b[c++])>>>0:(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,c));c+=b;a.g&&1===(c-a.offset&1)&&c++;a.b=c}}function z(e,f){e=e.a[f];return void 0===e?null:e};function A(e,f){f=f||{};this.a=e;this.g=f.parserOption;this.sampleRate=f.sampleRate||22050}
A.prototype.f=function(){var e,f,b=new n(this.a,this.g);y(b);if(1!==b.a.length)throw Error("wrong chunk length");b=z(b,0);if(null===b)throw Error("chunk not found");var a=this.a,c=b.offset,d;if("RIFF"!==b.type)throw Error("invalid chunk type:"+b.type);d=String.fromCharCode(a[c++],a[c++],a[c++],a[c++]);if("sfbk"!==d)throw Error("invalid signature:"+d);b=new n(a,{index:c,length:b.a-4});y(b);if(3!==b.a.length)throw Error("invalid sfbk structure");a=z(b,0);c=this.a;d=a.offset;var g;if("LIST"!==a.type)throw Error("invalid chunk type:"+
a.type);g=String.fromCharCode(c[d++],c[d++],c[d++],c[d++]);if("INFO"!==g)throw Error("invalid signature:"+g);y(new n(c,{index:d,length:a.a-4}));a=z(b,1);c=this.a;d=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);g=String.fromCharCode(c[d++],c[d++],c[d++],c[d++]);if("sdta"!==g)throw Error("invalid signature:"+g);a=new n(c,{index:d,length:a.a-4});y(a);if(1!==a.a.length)throw Error("TODO");this.b=z(a,0);b=z(b,2);a=this.a;c=b.offset;if("LIST"!==b.type)throw Error("invalid chunk type:"+
b.type);d=String.fromCharCode(a[c++],a[c++],a[c++],a[c++]);if("pdta"!==d)throw Error("invalid signature:"+d);b=new n(a,{index:c,length:b.a-4});y(b);if(9!==b.a.length)throw Error("invalid pdta chunk");a=z(b,0);c=this.a;d=a.offset;g=[];var h=a.offset+a.a;if("phdr"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<h;)g.push({J:String.fromCharCode.apply(null,c.subarray(d,d+=20)),F:c[d++]|c[d++]<<8,l:c[d++]|c[d++]<<8,G:c[d++]|c[d++]<<8,A:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0,o:(c[d++]|c[d++]<<
8|c[d++]<<16|c[d++]<<24)>>>0,B:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0});a=z(b,1);c=this.a;d=a.offset;g=[];h=a.offset+a.a;if("pbag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<h;)g.push({H:c[d++]|c[d++]<<8,I:c[d++]|c[d++]<<8});a=z(b,2);if("pmod"!==a.type)throw Error("invalid chunk type:"+a.type);H(this,a);a=z(b,3);if("pgen"!==a.type)throw Error("invalid chunk type:"+a.type);I(this,a);a=z(b,4);c=this.a;d=a.offset;g=[];h=a.offset+a.a;if("inst"!==a.type)throw Error("invalid chunk type:"+
a.type);for(;d<h;)g.push({w:String.fromCharCode.apply(null,c.subarray(d,d+=20)),s:c[d++]|c[d++]<<8});a=z(b,5);c=this.a;d=a.offset;g=[];h=a.offset+a.a;if("ibag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<h;)g.push({u:c[d++]|c[d++]<<8,v:c[d++]|c[d++]<<8});a=z(b,6);if("imod"!==a.type)throw Error("invalid chunk type:"+a.type);H(this,a);a=z(b,7);if("igen"!==a.type)throw Error("invalid chunk type:"+a.type);I(this,a);h=z(b,8);b=this.a;a=h.offset;c=[];d=[];g=h.offset+h.a;var p,x,t,u,q,B,C,
D,E;if("shdr"!==h.type)throw Error("invalid chunk type:"+h.type);for(;a<g;){h=String.fromCharCode.apply(null,b.subarray(a,a+=20));p=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;x=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;t=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;u=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;q=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;B=b[a++];C=b[a++]<<24>>24;D=b[a++]|b[a++]<<8;E=b[a++]|b[a++]<<8;e=new Int16Array((new Uint8Array(b.subarray(this.b.offset+
2*p,this.b.offset+2*x))).buffer);t-=p;u-=p;if(0<q){var F,r,v,l=e,G=q;for(f=1;G<this.sampleRate;){v=new Int16Array(2*l.length);r=e=0;for(F=l.length;r<F;++r)v[e++]=l[r],v[e++]=l[r];l=v;f*=2;G*=2}e=l;q*=f;t*=f;u*=f}c.push(e);d.push({L:h,start:p,end:x,N:t,m:u,sampleRate:q,C:B,D:C,K:D,M:E})}this.a=null};
function H(e,f){e=e.a;var b=f.offset;f=f.offset+f.a;for(var a,c,d=[];b<f;){b+=2;a=e[b++]|e[b++]<<8;c=J[a];if(void 0===c)d.push({type:c,value:{code:a,c:e[b]|e[b+1]<<8<<16>>16,i:e[b++],h:e[b++]}});else switch(c){case "keyRange":case "velRange":case "keynum":case "velocity":d.push({type:c,value:{i:e[b++],h:e[b++]}});break;default:d.push({type:c,value:{c:e[b++]|e[b++]<<8<<16>>16}})}b+=2;b+=2}}
function I(e,f){e=e.a;var b=f.offset;f=f.offset+f.a;for(var a,c,d=[];b<f;)if(a=e[b++]|e[b++]<<8,c=J[a],void 0===c)d.push({type:c,value:{code:a,c:e[b]|e[b+1]<<8<<16>>16,i:e[b++],h:e[b++]}});else switch(c){case "keynum":case "keyRange":case "velRange":case "velocity":d.push({type:c,value:{i:e[b++],h:e[b++]}});break;default:d.push({type:c,value:{c:e[b++]|e[b++]<<8<<16>>16}})}}
var J=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey","endOper"];m("SoundFont.Parser",A);m("SoundFont.Parser.prototype.parse",A.prototype.f);}).call(this); //# sourceMappingURL=sf2.parser.min.js.map

/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ], 2013-2018 - Logue [ https://github.com/logue/sf2synth.js ] The MIT License */(function() {'use strict';var h=this;function k(e,b){e=e.split(".");var a=h;e[0]in a||!a.execScript||a.execScript("var "+e[0]);for(var c;e.length&&(c=e.shift());)e.length||void 0===b?a=a[c]?a[c]:a[c]={}:a[c]=b};function r(e,b){b=b||{};this.input=e;this.b=b.index||0;this.length=b.length||e.length-this.b;this.offset=this.b;this.padding=void 0!==b.padding?b.padding:!0;this.i=void 0!==b.bigEndian?b.bigEndian:!1}function w(e,b,a){this.type=e;this.size=b;this.offset=a}
r.prototype.parse=function(){var e=this.length+this.offset;for(this.a=[];this.b<e;){var b=this.input;var a=this.b;this.a.push(new w(String.fromCharCode(b[a++],b[a++],b[a++],b[a++]),b=this.i?(b[a++]<<24|b[a++]<<16|b[a++]<<8|b[a++])>>>0:(b[a++]|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0,a));a+=b;this.padding&&1===(a-this.offset&1)&&a++;this.b=a}};function x(e,b){e=e.a[b];return void 0===e?null:e};function y(e,b){b=b||{};this.input=e;this.j=b.parserOption;this.sampleRate=b.sampleRate||22050}
y.prototype.parse=function(){var e,b=new r(this.input,this.j);b.parse();if(1!==b.a.length)throw Error("wrong chunk length");b=x(b,0);if(null===b)throw Error("chunk not found");var a=this.input,c=b.offset;if("RIFF"!==b.type)throw Error("invalid chunk type:"+b.type);var d=String.fromCharCode(a[c++],a[c++],a[c++],a[c++]);if("sfbk"!==d)throw Error("invalid signature:"+d);b=new r(a,{index:c,length:b.size-4});b.parse();if(3!==b.a.length)throw Error("invalid sfbk structure");a=x(b,0);c=this.input;d=a.offset;
if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);var f=String.fromCharCode(c[d++],c[d++],c[d++],c[d++]);if("INFO"!==f)throw Error("invalid signature:"+f);(new r(c,{index:d,length:a.size-4})).parse();a=x(b,1);c=this.input;d=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);f=String.fromCharCode(c[d++],c[d++],c[d++],c[d++]);if("sdta"!==f)throw Error("invalid signature:"+f);a=new r(c,{index:d,length:a.size-4});a.parse();if(1!==a.a.length)throw Error("TODO");this.h=x(a,
0);b=x(b,2);a=this.input;c=b.offset;if("LIST"!==b.type)throw Error("invalid chunk type:"+b.type);d=String.fromCharCode(a[c++],a[c++],a[c++],a[c++]);if("pdta"!==d)throw Error("invalid signature:"+d);b=new r(a,{index:c,length:b.size-4});b.parse();if(9!==b.a.length)throw Error("invalid pdta chunk");a=x(b,0);c=this.input;d=a.offset;f=[];var g=a.offset+a.size;if("phdr"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<g;)f.push({J:String.fromCharCode.apply(null,c.subarray(d,d+=20)),F:c[d++]|c[d++]<<
8,l:c[d++]|c[d++]<<8,G:c[d++]|c[d++]<<8,A:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0,o:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0,B:(c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24)>>>0});a=x(b,1);c=this.input;d=a.offset;f=[];g=a.offset+a.size;if("pbag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<g;)f.push({H:c[d++]|c[d++]<<8,I:c[d++]|c[d++]<<8});a=x(b,2);if("pmod"!==a.type)throw Error("invalid chunk type:"+a.type);C(this,a);a=x(b,3);if("pgen"!==a.type)throw Error("invalid chunk type:"+a.type);
D(this,a);a=x(b,4);c=this.input;d=a.offset;f=[];g=a.offset+a.size;if("inst"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<g;)f.push({w:String.fromCharCode.apply(null,c.subarray(d,d+=20)),s:c[d++]|c[d++]<<8});a=x(b,5);c=this.input;d=a.offset;f=[];g=a.offset+a.size;if("ibag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;d<g;)f.push({u:c[d++]|c[d++]<<8,v:c[d++]|c[d++]<<8});a=x(b,6);if("imod"!==a.type)throw Error("invalid chunk type:"+a.type);C(this,a);a=x(b,7);if("igen"!==a.type)throw Error("invalid chunk type:"+
a.type);D(this,a);g=x(b,8);b=this.input;a=g.offset;c=[];d=[];f=g.offset+g.size;if("shdr"!==g.type)throw Error("invalid chunk type:"+g.type);for(;a<f;){g=String.fromCharCode.apply(null,b.subarray(a,a+=20));var n=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;var z=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;var t=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;var u=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;var p=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;var F=b[a++];var G=b[a++]<<
24>>24;var H=b[a++]|b[a++]<<8;var I=b[a++]|b[a++]<<8;var l=new Int16Array((new Uint8Array(b.subarray(this.h.offset+2*n,this.h.offset+2*z))).buffer);t-=n;u-=n;if(0<p){var A,m=l,B=p;for(e=1;B<this.sampleRate;){var v=new Int16Array(2*m.length);var q=l=0;for(A=m.length;q<A;++q)v[l++]=m[q],v[l++]=m[q];m=v;e*=2;B*=2}l=m;p*=e;t*=e;u*=e}c.push(l);d.push({L:g,start:n,end:z,N:t,m:u,sampleRate:p,C:F,D:G,K:H,M:I})}this.input=null};
function C(e,b){e=e.input;var a=b.offset;b=b.offset+b.size;for(var c,d,f=[];a<b;){a+=2;c=e[a++]|e[a++]<<8;d=E[c];if(void 0===d)f.push({type:d,value:{code:c,c:e[a]|e[a+1]<<8<<16>>16,g:e[a++],f:e[a++]}});else switch(d){case "keyRange":case "velRange":case "keynum":case "velocity":f.push({type:d,value:{g:e[a++],f:e[a++]}});break;default:f.push({type:d,value:{c:e[a++]|e[a++]<<8<<16>>16}})}a+=2;a+=2}}
function D(e,b){e=e.input;var a=b.offset;b=b.offset+b.size;for(var c,d,f=[];a<b;)if(c=e[a++]|e[a++]<<8,d=E[c],void 0===d)f.push({type:d,value:{code:c,c:e[a]|e[a+1]<<8<<16>>16,g:e[a++],f:e[a++]}});else switch(d){case "keynum":case "keyRange":case "velRange":case "velocity":f.push({type:d,value:{g:e[a++],f:e[a++]}});break;default:f.push({type:d,value:{c:e[a++]|e[a++]<<8<<16>>16}})}}
var E=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey","endOper"];k("SoundFont.Parser",y);k("SoundFont.Parser.prototype.parse",y.prototype.parse);}).call(this); //# sourceMappingURL=sf2.parser.min.js.map

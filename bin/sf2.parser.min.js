/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ], 2013-2018 - Logue [ https://github.com/logue/sf2synth.js ] The MIT License */(function() {'use strict';var f,h=this;function n(a,b){a=a.split(".");var c=h;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b};function t(a,b){b=b||{};this.input=a;this.c=b.index||0;this.length=b.length||a.length-this.c;this.offset=this.c;this.padding=void 0!==b.padding?b.padding:!0;this.s=void 0!==b.bigEndian?b.bigEndian:!1}function v(a,b,c){this.type=a;this.size=b;this.offset=c}t.prototype.parse=function(){var a=this.length+this.offset;for(this.b=[];this.c<a;)this.u()};
t.prototype.u=function(){var a=this.input,b=this.c;this.b.push(new v(String.fromCharCode(a[b++],a[b++],a[b++],a[b++]),a=this.s?(a[b++]<<24|a[b++]<<16|a[b++]<<8|a[b++])>>>0:(a[b++]|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0,b));b+=a;this.padding&&1===(b-this.offset&1)&&b++;this.c=b};t.prototype.a=function(a){a=this.b[a];return void 0===a?null:a};function w(a,b){b=b||{};this.input=a;this.M=b.parserOption;this.sampleRate=b.sampleRate||22050}f=w.prototype;f.parse=function(){var a=new t(this.input,this.M);a.parse();if(1!==a.b.length)throw Error("wrong chunk length");a=a.a(0);if(null===a)throw Error("chunk not found");this.J(a);this.input=null};
f.J=function(a){var b=this.input,c=a.offset;if("RIFF"!==a.type)throw Error("invalid chunk type:"+a.type);var d=String.fromCharCode(b[c++],b[c++],b[c++],b[c++]);if("sfbk"!==d)throw Error("invalid signature:"+d);a=new t(b,{index:c,length:a.size-4});a.parse();if(3!==a.b.length)throw Error("invalid sfbk structure");this.B(a.a(0));this.K(a.a(1));this.F(a.a(2))};
f.B=function(a){var b=this.input,c=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);var d=String.fromCharCode(b[c++],b[c++],b[c++],b[c++]);if("INFO"!==d)throw Error("invalid signature:"+d);(new t(b,{index:c,length:a.size-4})).parse()};
f.K=function(a){var b=this.input,c=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);var d=String.fromCharCode(b[c++],b[c++],b[c++],b[c++]);if("sdta"!==d)throw Error("invalid signature:"+d);a=new t(b,{index:c,length:a.size-4});a.parse();if(1!==a.b.length)throw Error("TODO");this.m=a.a(0)};
f.F=function(a){var b=this.input,c=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);var d=String.fromCharCode(b[c++],b[c++],b[c++],b[c++]);if("pdta"!==d)throw Error("invalid signature:"+d);a=new t(b,{index:c,length:a.size-4});a.parse();if(9!==a.b.length)throw Error("invalid pdta chunk");this.H(a.a(0));this.D(a.a(1));this.I(a.a(2));this.G(a.a(3));this.C(a.a(4));this.v(a.a(5));this.A(a.a(6));this.w(a.a(7));this.L(a.a(8))};
f.H=function(a){var b=this.input,c=a.offset,d=[],e=a.offset+a.size;if("phdr"!==a.type)throw Error("invalid chunk type:"+a.type);for(;c<e;)d.push({ca:String.fromCharCode.apply(null,b.subarray(c,c+=20)),Z:b[c++]|b[c++]<<8,N:b[c++]|b[c++]<<8,$:b[c++]|b[c++]<<8,V:(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,P:(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,W:(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0})};
f.D=function(a){var b=this.input,c=a.offset,d=[],e=a.offset+a.size;if("pbag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;c<e;)d.push({aa:b[c++]|b[c++]<<8,ba:b[c++]|b[c++]<<8})};f.I=function(a){if("pmod"!==a.type)throw Error("invalid chunk type:"+a.type);this.j(a)};f.G=function(a){if("pgen"!==a.type)throw Error("invalid chunk type:"+a.type);this.i(a)};
f.C=function(a){var b=this.input,c=a.offset,d=[],e=a.offset+a.size;if("inst"!==a.type)throw Error("invalid chunk type:"+a.type);for(;c<e;)d.push({U:String.fromCharCode.apply(null,b.subarray(c,c+=20)),R:b[c++]|b[c++]<<8})};f.v=function(a){var b=this.input,c=a.offset,d=[],e=a.offset+a.size;if("ibag"!==a.type)throw Error("invalid chunk type:"+a.type);for(;c<e;)d.push({S:b[c++]|b[c++]<<8,T:b[c++]|b[c++]<<8})};f.A=function(a){if("imod"!==a.type)throw Error("invalid chunk type:"+a.type);this.j(a)};
f.w=function(a){if("igen"!==a.type)throw Error("invalid chunk type:"+a.type);this.i(a)};
f.L=function(a){var b=this.input,c=a.offset,d=this.l=[],e=[],g=a.offset+a.size;if("shdr"!==a.type)throw Error("invalid chunk type:"+a.type);for(;c<g;){a=String.fromCharCode.apply(null,b.subarray(c,c+=20));var k=(b[c++]<<0|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;var u=(b[c++]<<0|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;var p=(b[c++]<<0|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;var q=(b[c++]<<0|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;var l=(b[c++]<<0|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0;var y=b[c++];var z=b[c++]<<
24>>24;var A=b[c++]|b[c++]<<8;var B=b[c++]|b[c++]<<8;var r=new Int16Array((new Uint8Array(b.subarray(this.m.offset+2*k,this.m.offset+2*u))).buffer);p-=k;q-=k;if(0<l){var m=this.o(r,l);r=m.l;l*=m.multiply;p*=m.multiply;q*=m.multiply}d.push(r);e.push({ea:a,start:k,end:u,ga:p,O:q,sampleRate:l,X:y,Y:z,da:A,fa:B})}};f.o=function(a,b){for(var c,d,e,g,k=1;b<this.sampleRate;){c=new Int16Array(2*a.length);d=g=0;for(e=a.length;d<e;++d)c[g++]=a[d],c[g++]=a[d];a=c;k*=2;b*=2}return{l:a,multiply:k}};
f.j=function(a){var b=this.input,c=a.offset;a=a.offset+a.size;for(var d,e,g=[];c<a;){c+=2;d=b[c++]|b[c++]<<8;e=x[d];if(void 0===e)g.push({type:e,value:{code:d,f:b[c]|b[c+1]<<8<<16>>16,h:b[c++],g:b[c++]}});else switch(e){case "keyRange":case "velRange":case "keynum":case "velocity":g.push({type:e,value:{h:b[c++],g:b[c++]}});break;default:g.push({type:e,value:{f:b[c++]|b[c++]<<8<<16>>16}})}c+=2;c+=2}};
f.i=function(a){var b=this.input,c=a.offset;a=a.offset+a.size;for(var d,e,g=[];c<a;)if(d=b[c++]|b[c++]<<8,e=x[d],void 0===e)g.push({type:e,value:{code:d,f:b[c]|b[c+1]<<8<<16>>16,h:b[c++],g:b[c++]}});else switch(e){case "keynum":case "keyRange":case "velRange":case "velocity":g.push({type:e,value:{h:b[c++],g:b[c++]}});break;default:g.push({type:e,value:{f:b[c++]|b[c++]<<8<<16>>16}})}};
var x=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey","endOper"];n("SoundFont.Parser",w);n("SoundFont.Parser.prototype.parse",w.prototype.parse);}).call(this); //# sourceMappingURL=sf2.parser.min.js.map
